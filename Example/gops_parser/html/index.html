<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>VISOR: VISOR</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="nrl_logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">VISOR
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">VISOR </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The goal of this project is to direct near real-time satellite data regarding the optical properties of the surface ocean into operational ocean models and coupled ocean-atmosphere models. These satellite data are presently processed and distributed by the Naval Oceanographic Office (NAVOCEANO) for warfighter support, however, at present there is no mechanism that would direct these data into the operational ocean models. The present suite of operational models uses either a static table of optical attenuation coefficients that is based on Jerlovâ€™s early work (before the modern satellite era [Jerlov 1968]), or a static monthly climatology built from an obsolete NASA mission (SeaWiFS). As these operational models do not utilize any contemporaneous ocean optical attenuation data, the default attenuation and radiative transfer computations may result in gross errors for simulated upper ocean temperature structure, mixed layer depth, and substantial underestimates of air-sea thermal energy exchange rates. These errors will occur in spite of temperature data assimilation efforts because incorrect attenuation functions create structural problems in the way the ocean models calculate radiant heating throughout the upper water column. In coupled modeling systems, these errors will also impact the thermal energy balance within the simulated ocean-atmosphere systems and may have cascading effects on the forecasts for a wide range of tactically pertinent environmental variables, such as Electro-Magnetic (EM) duct heights. </p>
<h1><a class="anchor" id="my-intro"></a>
VISOR Overview</h1>
<h2>Quick and Dirty</h2>
<ul>
<li>To build: ./scripts/build_visor.sh</li>
<li>To run a test (must be customized, ./scripts/test_netcdf.env): ./scripts/test_netcdfs.sh</li>
</ul>
<h2>Structure</h2>
<ul>
<li>./Makefile -Linux PC's Makefile</li>
<li>./Makefile_DSRC -HPC Makefile</li>
<li>./misc -directory containing material germane to software engineering of this project</li>
<li>./jbooks -Jupyter lab files for basic debugging and origination of code.</li>
<li>./screen_visor.rc -Screen configuration to see execution of slicer.</li>
<li>./scripts -directory with scripts used to:test, build, scan project.</li>
<li>./build_visor.sh -builds PC Makefile</li>
<li>./build_visorCray.sh -builds DSRC Makefile, loads modules (Gordon, Conrad), for DSRC</li>
<li>./build_visorSGI.sh -builds DSRC Makefile, loads modules (Gaffney, Koehr), for DSRC</li>
<li>./test*.sh -Various test routines</li>
<li>./visor_gops_parser_doxygen.dxy -Doxygen documentation generation configuration file</li>
<li>./sonar-project.properties -SonarQube (DI2E, static code scanner) properties file.</li>
<li>./sonarScan_visor.sh -Script to invoke sonar scan with key for this project.</li>
<li>./profile.sh -Used to call various valgrind calls for code analysis</li>
<li>./replicateClimo_visor.ksh -Script for DSRC to replicate a single climatology to the entire year (12 months)</li>
<li>./docs -STIG, Design, ACG, and related documentation necessary for transition</li>
<li>./src -actual source code<ul>
<li>./visor_gops_climatology_generator.c -Reads climatology and creates an NCODAQC compliant climo file(s)</li>
<li>./visor_gops_parser.c -Reads NetCDF/HDF5 APS generated satellite imagery and slices it for NCODAQC ingest</li>
<li>./swapc_bytes.c -Swaps bytes for NCODAQC DSRC Big-endian (required)</li>
<li>./libll.c -Linked list tool used to store valid pixels in nodes on the heap.</li>
<li>./libNav.c -Structure to store navigation data with basic support routines.</li>
<li>./libProduct.c -Structure to store product data with basic support routines.</li>
<li>./log.c -Logging framework from external source.</li>
</ul>
</li>
<li>./test -Directory containing results of testing and validation</li>
<li>./UseCase -discrete information about data points to get against wrt the read</li>
<li>./TestCase -actual execution results</li>
</ul>
<h2>Description</h2>
<p>Given a l3mapgen created file at 0.01 resolution produce a NCODA-QC compliant output file for ingest into the NCODA system. Create a climatology file compliant with NCODA-QC expectations given a NetCDF based climatology file.</p>
<h2>Libraries (NetCDF / HDF / H5)</h2>
<p><em>Assumes access to APS libraries in direct support of all Ocean Color efforts.</em></p>
<p>APS Libraries: <code>/net/americium/export/sw/linux-x86_64-sl7/aps/local</code></p>
<h2>Reference</h2>
<ul>
<li><a href="https://confluence.di2e.net/display/NRL7331/VISOR">https://confluence.di2e.net/display/NRL7331/VISOR</a></li>
<li><a href="https://bitbucket.di2e.net/projects/NRL7331/repos/visor_gops_parser">https://bitbucket.di2e.net/projects/NRL7331/repos/visor_gops_parser/browse</a></li>
</ul>
<h2>Versioning</h2>
<p>See the Design Document for details.</p>
<h2>Operational file locations and job execution</h2>
<ul>
<li>Crontabs<ul>
<li>iridium (batch system master node) runs a job to pull NAVOCEANO GOPS data locally</li>
<li>00 07 * * * /home/cwood/Documents/visor_gops_scripts/src/visor_cron.sh &gt; /projects/socom/visor_gops/logs/visor_cron.log 2&gt;&amp;1</li>
<li>data are stored in <code>/projects/socom/visor_gops/db</code></li>
<li>logs are stored in <code>/projects/socom/visor_gops/logs</code></li>
</ul>
</li>
</ul>
<h2>TEST CASES</h2>
<ul>
<li><code>/projects/socom/NCODA_TESTCASE/2021_TEST</code></li>
<li>Previous tests evidenced by DTG.</li>
</ul>
<h2>Critical Project Data</h2>
<ul>
<li>Climatology created by our team located at <code>/projects/socom/visor_climatology/output/v3</code></li>
<li>Source to build climatolog in this repository.</li>
<li>Source of data used to build output <code>/projects/socom/source/NAVOCEANO_JJ</code></li>
<li>Location on DSRC (gaffney,koehr) is <code>/p/work1/cwood/NCODAQC_OPTICS_CLIM</code>, note that based on DSRC file schedules this can "suddenly" disappear without by-hands refresh.</li>
</ul>
<h2>DSRC Efforts</h2>
<p>See visor_gops_scripts repository. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
